@typeparam TItem where TItem : class, new()
@using Microsoft.AspNetCore.Components
@using System.Reflection
@using static ItemHelper

<input type="date" value="@dateValue.ToString("yyyy-MM-dd")" @onchange="HandleChange" />    

@code {
    [Parameter]
    public TItem Item { get; set; }

    [Parameter]
    public string PropertyName { get; set; }

    private DateOnly dateValue;

    protected override void OnParametersSet()
    {
        dateValue = (DateOnly)typeof(TItem).GetProperty(PropertyName).GetValue(Item);
    }

    private void HandleChange(ChangeEventArgs e)
    {
        dateValue = DateOnly.Parse(e.Value.ToString());
        typeof(TItem).GetProperty(PropertyName).SetValue(Item, dateValue);
    }
}
